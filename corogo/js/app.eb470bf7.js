!function(t){function e(e){for(var r,i,s=e[0],c=e[1],l=e[2],h=0,p=[];h<s.length;h++)i=s[h],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(u&&u(e);p.length;)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={0:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([130,1]),n()}({104:function(t,e,n){},130:function(t,e,n){"use strict";n.r(e);n(51),n(91),n(103),n(104);var r=n(50),o=n(15);n(74),n(33),n(79),n(49),n(108),n(109),n(110),n(82);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function t(e){var n=t.synth,r=localStorage.getItem("last-key")||"notok",o="OK".concat(Date()),a=e,s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return JSON.parse(localStorage.getItem(t))||[]}(),c=0,l={x:0,y:0,r:30,fill:[1,1,1,1],increment:5,stop:-5},u=[i({},l)],h=function(){return s.length>0&&!1},p=!0;a.speed=.05,a.setup=function(){a.noLoop(),a.pixelDensity(1),a.createCanvas(100,100),a.background(255,255,100),a.noStroke()},a.draw=function(){h()&&(l=s[c]),l.x>=Math.abs(a.width-l.r-l.stop)?l.y+=l.increment:(n.triggerAttackRelease(a.constrain(Math.abs(l.fill[1]/l.fill[2])*l.increment+4*l.x-10*l.y,40,2e5),"1"),l.x+=l.increment),l.y>Math.abs(a.height-l.r-l.stop)&&(h()?l=s[c+=1]:(l.fill=[Math.floor(a.random(-700,300)),Math.floor(a.random(-255,100)),Math.floor(a.random(-500,500))],l.r+=6*Math.floor(5*Math.random()),l.x=-5,l.y=-5,u.push(i({},l)))),l.r>Math.abs(a.height-l.stop)&&(l.r=10,h()||(l.increment=Math.ceil(33*Math.ceil(33*Math.random())/l.r)),l.increment>3&&(l.stop+=(a.width/3*3-l.stop)*a.speed,l.stop>100*a.width&&(a.saveCapture(),setTimeout((function(){a.clear(),l={x:0,y:0,r:30,fill:0,increment:5,stop:-5},a.loop()}),1e4)))),a.fill(l.fill),a.rect(l.x,l.y,l.r)},a.keyPressed=function(){switch(a.keyCode){case 32:a.saveCapture();break;case 78:p?(a.noLoop(),p=!p):(a.loop(),p=!p)}},a.saveCapture=function(){var t,e;a.noLoop(),a.pixelDensity()>5&&(a.saveCanvas(document.querySelector("canvas"),"ok".concat(Date()),"png"),h()||(console.log(JSON.stringify(u)),t=u,e=o,localStorage.setItem(e,JSON.stringify(t)),localStorage.setItem("last-key",e)))}},l=function t(e){var n=e,r=t.synth,o=t.Tone;n.lastKey=localStorage.getItem("last-key")||"notok",n.thisKey="OK".concat(Date()),n.get=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.lastKey;return JSON.parse(localStorage.getItem(t))||[]},n.save=function(t,e){localStorage.setItem(e,JSON.stringify(t)),localStorage.setItem("last-key",e)};var a=!0,i={x:30,y:30,r:10,fill:[0,0,0,0]},s=new o.Sequence((function(t,e){i.fill=[Math.floor(n.random(-200,600)),Math.floor(n.random(-255,100)),Math.floor(n.random(-500,500))],i.r=Math.floor(5*Math.random())*n.scaleRef/15,i.x=n.width/2,i.y=e+100,r.triggerAttackRelease(e,"4n")}),[110,220,[55,220,[440,880,440]]]);n.setup=function(){n.pixelDensity(3),n.createCanvas(n.windowWidth,n.windowHeight),n.scaleRef=(n.width+n.height)/2,n.background(0),n.noStroke(),n.rectMode(n.CENTER),s.humanize=!0,s.probability=1,s.start(),o.Transport.loopEnd="1:0:0",o.Transport.loop=!0,o.Transport.bpm.value=70},n.draw=function(){i.r+=.5*(n.noise(i.fill[0],i.fill[3],i.fill[1])*n.scaleRef/2-i.r),n.fill(i.fill),i.y<n.height/2?n.rect(i.x,i.y,i.r):n.ellipse(i.x,i.y,i.r)},n.mousePressed=function(){i.x+=5,o.Transport.start()},n.keyPressed=function(){switch(n.keyCode){case 32:n.saveCapture();break;case 78:o.Transport.toggle(),a?(n.noLoop(),a=!a):(n.loop(),a=!a);break;case 65:o.Transport.clear(2);break;default:console.log(o.Transport),s.at(2,[220,n.random(220,480)]),console.log(s)}},n.saveCapture=function(){n.pixelDensity()>1&&n.saveCanvas(document.querySelector("canvas"),"ok".concat(Date()),"png")}},u=(n(84),n(111),n(112),n(113),n(116),n(117),n(118),n(85),n(124),n(125),n(127),n(129),function(t,e,n,r){return Math.sqrt(Math.pow(t-e,2)+Math.pow(n-r,2))});function h(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var a=200/o;this.r=(25+15*Math.random())*a,this.r=this.r<5?5:this.r,this.pos={x:e,y:n},this.updating=!0,r&&(this.virus=!0,this.fill=[120*Math.random(),120*Math.random(),120*Math.random(),255])}var e,n,r;return e=t,(n=[{key:"contagion",value:function(t){var e=this;t.forEach((function(t){u(t.pos.x,e.pos.x,t.pos.y,e.pos.y)<e.r/2&&e.virus&&!t.virus&&Math.random()>.6&&(t.virus=!0,t.mother=e,t.fill=[].concat(h(e.fill.slice(0,3)),[Math.abs(e.fill[3]-30)+10]))}))}},{key:"update",value:function(t){this.updating=!0,this.pos.x+=.08*(t.x-this.pos.x),this.pos.y+=.08*(t.y-this.pos.y),u(t.x,this.pos.x,t.y,this.pos.y)<3&&(this.updating=!1)}},{key:"display",value:function(t){this.died||(t.push(),t.fill(this.virus?this.fill:[255,255,255,3*this.r]),t.ellipse(this.pos.x,this.pos.y,this.r),this.mother&&u(this.mother.pos.x,this.pos.x,this.mother.pos.y,this.pos.y)<3*this.r&&(t.strokeWeight(this.r/2),t.stroke(h(this.fill.slice(0,4))),t.line(this.pos.x,this.pos.y,this.mother.pos.x,this.mother.pos.y)),t.pop())}}])&&p(e.prototype,n),r&&p(e,r),t}(),d=function t(e){var n=e,r=t.Tone;n.lastKey=localStorage.getItem("last-key")||"notok",n.thisKey="OK".concat(Date()),n.get=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.lastKey;return JSON.parse(localStorage.getItem(t))||[]},n.save=function(t,e){localStorage.setItem(e,JSON.stringify(t)),localStorage.setItem("last-key",e)};var o=!0,a=[],i=[],s=4,c=0,l=[],u=parseInt(prompt("Enter a number (250-1000)","0"))||250;n.setup=function(){n.createCanvas(n.windowWidth,n.windowHeight),n.scaleRef=(n.width+n.height)/2,n.background(0),n.noStroke(),n.rectMode(n.CENTER),n.textAlign(n.CENTER),n.textSize(40),n.strokeCap(n.SQUARE),window.addEventListener("touchend",n.handleTouchEnd),window.addEventListener("mouseup",n.handleTouchEnd);for(var t=0;t<u;t+=1)a[t]=new f(n.random(0,n.width),n.random(0,n.height),!1,u*(1e3/(n.width+n.height))),i[t]={x:n.random(0,n.width),y:n.random(0,n.height)}},n.draw=function(){n.background(200,200,200),n.beginShape(),n.noFill(),a.forEach((function(t,e){t.updating||t.contagion(a),t.update(i[e]),t.display(n),t.virus})),n.fill(255,100,100,200),n.ellipse(n.mouseX,n.mouseY,80),n.text("".concat(c," Days\n").concat((a.filter((function(t){return t.virus})).length/a.length*100).toFixed(2),"%\n").concat(a.filter((function(t){return!t.died})).length," Left"),n.width/2,.7*n.height),n.push();for(var t=0;t<l.length;t+=1){n.stroke(0,180),n.strokeWeight(10);var e=20+10*t;n.textSize(8),n.line(e,n.height-8*l[t]/u*250,e,n.height),n.noStroke(),n.text(t,e,n.height-5)}n.textSize(10),n.fill(0),n.text("plot: death by day",n.width/2,n.height-15),n.pop()},n.handleTouchEnd=function(t){t.preventDefault(),a.every((function(t){return!t.updating}))||a.forEach((function(t,e){t.pos=i[e]})),s>0&&(a.push(new f(n.mouseX,n.mouseY,!0,u)),i.push({x:n.mouseX,y:n.mouseY}),s-=1),c+=1;var e=0;a.forEach((function(t){Math.random()>.95&&t.virus&&!t.died&&(t.died=!0,e+=1)})),l.push(e),i=i.map((function(t){if(Math.random()>.98)return{ancient:{x:t.x,y:t.y},x:n.mouseX+n.random(-50,50),y:n.mouseY+n.random(-50,50)};if(Math.random()>.8){var e=u,r=t.x+n.random(-e,e),o=t.y+n.random(-e,e);return r=r<0?n.random(0,n.width):r,o=o<0?n.random(0,n.height):o,{ancient:{x:t.x,y:t.y},x:r,y:o}}return Math.random()>.5&&t.ancient?t.ancient:t}))},n.keyPressed=function(){switch(n.keyCode){case 32:n.saveCapture();break;case 78:r.Transport.toggle(),o?(n.noLoop(),o=!o):(n.loop(),o=!o)}},n.saveCapture=function(){n.pixelDensity()>1&&n.saveCanvas(document.querySelector("canvas"),"ok".concat(Date()),"png")},n.windowResized=function(){n.resizeCanvas(n.windowWidth,n.windowHeight)}};function y(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function g(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){y(a,r,o,i,s,"next",t)}function s(t){y(a,r,o,i,s,"throw",t)}i(void 0)}))}}var m=new o.Distortion(.1),v=new o.Tremolo(5,.6).start(),w=new o.Synth({oscillator:{type:"sine",modulationType:"sawtooth",modulationIndex:6,harmonicity:1},envelope:{attack:.4,decay:.1,sustain:.8,release:1}}).chain(m,v,o.Master);c.synth=w,l.synth=w,l.Tone=o;new r(d);r.friendlyReport=!1,document.querySelector("body").addEventListener("click",g(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.start();case 2:console.log("audio is ready");case 3:case"end":return t.stop()}}),t)}))))}});
//# sourceMappingURL=app.eb470bf7.js.map